<!DOCTYPE html>
<html lang="{{ .public.settings.locale }}">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="{{ .private.favicon }}?size=64" sizes="64x64" type="image/png">
  <link rel="icon" href="{{ .private.favicon }}?size=200" sizes="200x200" type="image/png">
  <link rel="apple-touch-icon" href="{{ .private.favicon }}?size=200&bg=white" sizes="200x200" type="image/png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#1a202c">
  {{ if ne .public.settings.googleAdSense "" }}
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client={{ .public.settings.googleAdSense }}" crossorigin="anonymous"></script>
  {{ end }}
  {{ if .private.canonicalURL }}
    <link rel="canonical" href="{{ .private.canonicalURL }}" />
  {{ end }}
  <!-- Preload images from custom CSS for faster LCP -->
  {{ if .public.tenant }}{{ if .public.tenant.CustomCSS }}{{ range extractCSSImages .public.tenant.CustomCSS }}<link rel="preload" href="{{ . }}" as="image" fetchpriority="high">
  {{ end }}<style>{{ $.public.tenant.CustomCSS | safeCSS }}</style>{{ end }}{{ end }}
  {{ if .private.assets }}
    {{range .private.assets.CSS}}
      <link rel="stylesheet" href="{{ $.public.settings.assetsURL }}{{ . }}" media="print" class="async-css" />
      <noscript><link rel="stylesheet" href="{{ $.public.settings.assetsURL }}{{ . }}" /></noscript>
    {{end}}
    <script nonce="{{ .public.contextID }}">
      document.querySelectorAll('link.async-css').forEach(function(l){l.onload=function(){this.media='all'};if(l.sheet)l.media='all';});
    </script>
  {{end}}
  {{block "head" .}}{{end}}
  <title>{{ .public.title }}</title>
  <meta name="description" content="{{ .public.description }}" />
  
  {{ if and .public.props.data.page (eq .public.page "Page/ViewPage.page") }}
  <meta property="og:title" content="{{ .public.props.data.page.title }}" />
  <meta property="og:description" content="{{ .public.props.data.page.metaDescription }}" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="{{ .private.currentURL }}" />
  {{ if .public.props.data.page.bannerImageBKey }}
  <meta property="og:image" content="{{ .public.settings.baseURL }}/static/images/{{ .public.props.data.page.bannerImageBKey }}" />
  {{ else }}
  <meta property="og:image" content="https://tarkov.community/static/images/attachments/wssPjl8GHo6bGFQXuiB4vakHWMQnE8srDCLS21btPmndlcWpft6UZkrBzZXwayao-VGFya292Q29tbXVuaXR5X09HTUVUQQ.webp">
  {{ end }}
  <meta property="article:published_time" content="{{ .public.props.data.page.publishedAt }}" />
  <meta property="article:modified_time" content="{{ .public.props.data.page.updatedAt }}" />
  {{ range .public.props.data.page.authors }}
  <meta property="article:author" content="{{ .name }}" />
  {{ end }}
  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{ .public.props.data.page.title }}" />
  <meta name="twitter:description" content="{{ .public.props.data.page.metaDescription }}" />
  {{ if .public.props.data.page.bannerImageBKey }}
  <meta name="twitter:image" content="{{ .public.settings.baseURL }}/static/images/{{ .public.props.data.page.bannerImageBKey }}" />
  {{ end }}
  
  {{ if .public.props.data.page.canonicalUrl }}
  <link rel="canonical" href="{{ .public.props.data.page.canonicalUrl }}" />
  {{ else if not .private.canonicalURL }}
  <link rel="canonical" href="{{ .private.currentURL }}" />
  {{ end }}
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "{{ escape .public.props.data.page.title }}",
    "description": "{{ escape .public.props.data.page.metaDescription }}",
    "datePublished": "{{ .public.props.data.page.publishedAt }}",
    "dateModified": "{{ .public.props.data.page.updatedAt }}",
    "author": [
      {{ range $index, $author := .public.props.data.page.authors }}
      {{ if $index }},{{ end }}
      {
        "@type": "Person",
        "name": "{{ escape $author.name }}"
      }
      {{ end }}
    ],
    {{ if .public.props.data.page.bannerImageBKey }}"image": "{{ .public.settings.baseURL }}/static/images/{{ .public.props.data.page.bannerImageBKey }}",{{ end }}
    "publisher": {
      "@type": "Organization",
      "name": "{{ escape .public.tenant.name }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ .public.settings.baseURL }}/static/favicon/{{ .public.tenant.logoBlobKey }}"
      }
    }
  }
  </script>
  {{ else }}
  <meta property="og:title" content="{{ .public.title }}" />
  <meta property="og:description" content="{{ .public.description }}" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="{{ .private.currentURL }}" />
  <meta property="og:image" content="https://tarkov.community/static/images/attachments/wssPjl8GHo6bGFQXuiB4vakHWMQnE8srDCLS21btPmndlcWpft6UZkrBzZXwayao-VGFya292Q29tbXVuaXR5X09HTUVUQQ.webp">
  {{ end }}
  
  {{ if eq .public.settings.environment "development" }}
  <meta name="robots" content="noindex">
  {{ end }}
</head>
<body>
  <div id="svg-sprite" style="display:none"></div>
  <script data-cfasync="false" nonce="{{ .public.contextID }}">
    fetch('{{ .public.settings.assetsURL }}/assets/sprite.svg')
      .then(function(r){return r.text()})
      .then(function(svg){document.getElementById('svg-sprite').innerHTML=svg})
      .catch(function(){});
  </script>
  {{block "noscript" .}}{{end}}

  {{template "content" .}}

  <script id="server-data" type="application/json">
    {{template "server-data" .}}
  </script>

  {{ if ne .public.settings.googleAnalytics "" }}
  <script async nonce="{{ .public.contextID }}" src="https://www.googletagmanager.com/gtag/js?id={{ .public.settings.googleAnalytics }}"></script>
  <script nonce="{{ .public.contextID }}">
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', '{{ .public.settings.googleAnalytics }}');
  </script>
  {{ end }}

  {{template "end-of-body" .}}
</body>
</html>
